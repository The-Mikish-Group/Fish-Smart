@model Members.Models.CatchAlbum

@{
    ViewData["Title"] = "Edit Album - " + Model.Name;
}

<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="text-warning">
                        <i class="bi bi-pencil-square"></i>
                        Edit Album
                    </h1>
                    <p class="text-muted mb-0">Update your album details</p>
                </div>
                <div>
                    <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i>
                        Back to Album
                    </a>
                </div>
            </div>

            <!-- Edit Form -->
            <div class="card shadow">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">
                        <i class="bi bi-gear-fill"></i>
                        Album Settings
                    </h5>
                </div>
                <div class="card-body">
                    <form asp-action="Edit" method="post">
                        <div asp-validation-summary="All" class="text-danger mb-3"></div>
                        
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="UserId" />

                        <!-- Album Name -->
                        <div class="mb-3">
                            <label asp-for="Name" class="form-label">
                                <i class="bi bi-tag-fill"></i> Album Name <span class="text-danger">*</span>
                            </label>
                            <input asp-for="Name" class="form-control" 
                                   placeholder="e.g., Summer Bass Fishing, Trophy Catches, Lake Trip 2024" />
                            <span asp-validation-for="Name" class="text-danger"></span>
                            <div class="form-text">Give your album a memorable name (up to 100 characters)</div>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label asp-for="Description" class="form-label">
                                <i class="bi bi-chat-square-text"></i> Description <span class="text-muted">(Optional)</span>
                            </label>
                            <textarea asp-for="Description" class="form-control" rows="3"
                                      placeholder="Tell the story behind this album - where you went, what techniques worked, memorable moments..."></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                            <div class="form-text">Share details about this collection (up to 500 characters)</div>
                        </div>

                        <!-- Privacy Setting -->
                        <div class="mb-4">
                            <div class="form-check" style="min-height: 1.5rem;">
                                <input asp-for="IsPublic" class="form-check-input" type="checkbox" id="isPublicCheckbox" 
                                       style="transform: scale(1.2); margin-top: 0.125rem;" />
                                <label asp-for="IsPublic" class="form-check-label" for="isPublicCheckbox" 
                                       style="cursor: pointer; padding-left: 0.5rem; line-height: 1.5;">
                                    <i class="bi bi-globe"></i> Make this album public
                                </label>
                                <div class="form-text">Public albums can be viewed by other Fish-Smart users (currently disabled)</div>
                            </div>
                        </div>

                        <!-- Album Cover Photo -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-camera-fill"></i> Album Cover Photo
                            </label>
                            
                            @if (!string.IsNullOrEmpty(Model.CoverImageUrl))
                            {
                                <div class="card mb-3">
                                    <div class="card-body text-center">
                                        <img src="@Model.CoverImageUrl" alt="@Model.Name" 
                                             class="img-fluid rounded shadow" style="max-height: 200px;" />
                                        <div class="mt-2">
                                            <small class="text-muted">Current cover photo</small>
                                        </div>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div class="card mb-3 bg-light">
                                    <div class="card-body text-center py-4">
                                        <i class="bi bi-image display-4 text-muted"></i>
                                        <div class="mt-2">
                                            <small class="text-muted">No cover photo set</small>
                                        </div>
                                    </div>
                                </div>
                            }
                            
                            <div class="d-flex gap-2">
                                <a asp-action="UploadPhoto" asp-route-id="@Model.Id" class="btn btn-primary btn-sm">
                                    <i class="bi bi-camera"></i>
                                    @(string.IsNullOrEmpty(Model.CoverImageUrl) ? "Add Cover Photo" : "Change Cover Photo")
                                </a>
                                @if (!string.IsNullOrEmpty(Model.CoverImageUrl))
                                {
                                    <a asp-controller="ImageViewer" asp-action="AlbumCover" asp-route-id="@Model.Id" 
                                       asp-route-returnUrl="@Url.Action("Edit", "CatchAlbum", new { id = Model.Id })" class="btn btn-success btn-sm">
                                        <i class="bi bi-palette"></i>
                                        Edit Background
                                    </a>
                                }
                            </div>
                            <div class="form-text">Upload a cover photo to represent this album. JPG, PNG, or GIF files up to 5MB.</div>
                        </div>

                        <!-- Album Info (Read-only) -->
                        <div class="card bg-light mb-4">
                            <div class="card-body">
                                <h6 class="card-title text-muted">
                                    <i class="bi bi-info-circle"></i>
                                    Album Information
                                </h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <small class="text-muted">Created:</small>
                                        <div class="fw-bold">@Model.CreatedAt.ToString("MMMM dd, yyyy 'at' h:mm tt")</div>
                                    </div>
                                    <div class="col-md-6">
                                        <small class="text-muted">Total Catches:</small>
                                        <div class="fw-bold">@Model.AlbumCatches.Count catches</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex justify-content-between">
                            <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i>
                                Cancel
                            </a>
                            <button type="submit" class="btn btn-warning">
                                <i class="bi bi-check-circle"></i>
                                Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Danger Zone -->
            <div class="card mt-4 border-danger">
                <div class="card-header bg-danger text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                        Danger Zone
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-danger mb-1">Delete this album</h6>
                            <p class="text-muted small mb-0">
                                Once you delete an album, there is no going back. This will remove all catches from the album but won't delete the actual catch records.
                            </p>
                        </div>
                        <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">
                            <i class="bi bi-trash"></i>
                            Delete Album
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}